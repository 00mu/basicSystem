<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>高频函数 | WEB 前端基础体系梳理</title>
    <meta name="description" content="进化中...">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/basicSystem/assets/css/0.styles.978a8c4c.css" as="style"><link rel="preload" href="/basicSystem/assets/js/app.fe57eed6.js" as="script"><link rel="preload" href="/basicSystem/assets/js/3.40885dd2.js" as="script"><link rel="preload" href="/basicSystem/assets/js/8.da290d25.js" as="script"><link rel="prefetch" href="/basicSystem/assets/js/10.8f192e07.js"><link rel="prefetch" href="/basicSystem/assets/js/11.70ea7752.js"><link rel="prefetch" href="/basicSystem/assets/js/12.aff4d014.js"><link rel="prefetch" href="/basicSystem/assets/js/13.0bf7b953.js"><link rel="prefetch" href="/basicSystem/assets/js/14.965f889e.js"><link rel="prefetch" href="/basicSystem/assets/js/15.54ac762d.js"><link rel="prefetch" href="/basicSystem/assets/js/16.6b7d15a8.js"><link rel="prefetch" href="/basicSystem/assets/js/17.4f9c33ec.js"><link rel="prefetch" href="/basicSystem/assets/js/18.e7829a1b.js"><link rel="prefetch" href="/basicSystem/assets/js/19.a14098a6.js"><link rel="prefetch" href="/basicSystem/assets/js/20.9cdf8898.js"><link rel="prefetch" href="/basicSystem/assets/js/21.52406625.js"><link rel="prefetch" href="/basicSystem/assets/js/22.5a250bd9.js"><link rel="prefetch" href="/basicSystem/assets/js/23.b68348d6.js"><link rel="prefetch" href="/basicSystem/assets/js/24.06a02506.js"><link rel="prefetch" href="/basicSystem/assets/js/25.09a10bf9.js"><link rel="prefetch" href="/basicSystem/assets/js/26.298e26d0.js"><link rel="prefetch" href="/basicSystem/assets/js/27.ba9538a8.js"><link rel="prefetch" href="/basicSystem/assets/js/28.4f67f474.js"><link rel="prefetch" href="/basicSystem/assets/js/29.4bea42c4.js"><link rel="prefetch" href="/basicSystem/assets/js/30.90e696e0.js"><link rel="prefetch" href="/basicSystem/assets/js/31.69c8c548.js"><link rel="prefetch" href="/basicSystem/assets/js/32.5309047d.js"><link rel="prefetch" href="/basicSystem/assets/js/33.5b269816.js"><link rel="prefetch" href="/basicSystem/assets/js/34.90d75a26.js"><link rel="prefetch" href="/basicSystem/assets/js/35.e1f8a67a.js"><link rel="prefetch" href="/basicSystem/assets/js/36.1224f9ef.js"><link rel="prefetch" href="/basicSystem/assets/js/37.514fe7f4.js"><link rel="prefetch" href="/basicSystem/assets/js/38.8691a21e.js"><link rel="prefetch" href="/basicSystem/assets/js/39.43c15237.js"><link rel="prefetch" href="/basicSystem/assets/js/4.616c069e.js"><link rel="prefetch" href="/basicSystem/assets/js/40.341eebc6.js"><link rel="prefetch" href="/basicSystem/assets/js/41.61141311.js"><link rel="prefetch" href="/basicSystem/assets/js/42.096b0e5b.js"><link rel="prefetch" href="/basicSystem/assets/js/43.08c8940b.js"><link rel="prefetch" href="/basicSystem/assets/js/44.972fa1ee.js"><link rel="prefetch" href="/basicSystem/assets/js/45.18b164ae.js"><link rel="prefetch" href="/basicSystem/assets/js/46.c5084eb9.js"><link rel="prefetch" href="/basicSystem/assets/js/47.5a081ac6.js"><link rel="prefetch" href="/basicSystem/assets/js/48.1dfe435d.js"><link rel="prefetch" href="/basicSystem/assets/js/49.9591def2.js"><link rel="prefetch" href="/basicSystem/assets/js/5.75c0cb05.js"><link rel="prefetch" href="/basicSystem/assets/js/50.42d39276.js"><link rel="prefetch" href="/basicSystem/assets/js/51.2ce3513a.js"><link rel="prefetch" href="/basicSystem/assets/js/52.7d8bbb55.js"><link rel="prefetch" href="/basicSystem/assets/js/53.a9481449.js"><link rel="prefetch" href="/basicSystem/assets/js/54.cdf677e4.js"><link rel="prefetch" href="/basicSystem/assets/js/55.19599d18.js"><link rel="prefetch" href="/basicSystem/assets/js/56.f10f47fa.js"><link rel="prefetch" href="/basicSystem/assets/js/57.e3bb2ba8.js"><link rel="prefetch" href="/basicSystem/assets/js/58.4ffe555a.js"><link rel="prefetch" href="/basicSystem/assets/js/59.a549b1ff.js"><link rel="prefetch" href="/basicSystem/assets/js/6.2dd188fc.js"><link rel="prefetch" href="/basicSystem/assets/js/7.6a47198c.js"><link rel="prefetch" href="/basicSystem/assets/js/9.b8c11fc3.js"><link rel="prefetch" href="/basicSystem/assets/js/vendors~docsearch.a3318253.js">
    <link rel="stylesheet" href="/basicSystem/assets/css/0.styles.978a8c4c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/basicSystem/" class="home-link router-link-active"><!----> <span class="site-name">WEB 前端基础体系梳理</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="手稿" class="dropdown-title"><span class="title">手稿</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础语法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basicSystem/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/basicSystem/basic/HTML/" class="nav-link">
  HTML
</a></li><li class="dropdown-subitem"><a href="/basicSystem/basic/CSS/" class="nav-link">
  CSS
</a></li></ul></li><li class="dropdown-item"><h4>
          MVVM
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basicSystem/mvvm/VUE/" class="nav-link">
  VUE
</a></li><li class="dropdown-subitem"><a href="/basicSystem/mvvm/React/" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/basicSystem/mvvm/Electron/" class="nav-link">
  Electron
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basicSystem/webpack/" class="nav-link">
  webpack
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/basicSystem/deepLearning/" class="nav-link">
  专题
</a></div><div class="nav-item"><a href="/basicSystem/coding/" class="nav-link router-link-active">
  Coding
</a></div><div class="nav-item"><a href="/basicSystem/interview/" class="nav-link">
  考点
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          编辑器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basicSystem/soft/git.html" class="nav-link">
  GIT
</a></li><li class="dropdown-subitem"><a href="/basicSystem/soft/vscode/" class="nav-link">
  VSCODE
</a></li></ul></li><li class="dropdown-item"><h4>
          效率工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basicSystem/coding/figma.com.html" class="nav-link">
  figma
</a></li></ul></li></ul></div></div> <a href="https://github.com/bbzz/basicSystem" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="手稿" class="dropdown-title"><span class="title">手稿</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础语法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basicSystem/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/basicSystem/basic/HTML/" class="nav-link">
  HTML
</a></li><li class="dropdown-subitem"><a href="/basicSystem/basic/CSS/" class="nav-link">
  CSS
</a></li></ul></li><li class="dropdown-item"><h4>
          MVVM
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basicSystem/mvvm/VUE/" class="nav-link">
  VUE
</a></li><li class="dropdown-subitem"><a href="/basicSystem/mvvm/React/" class="nav-link">
  React
</a></li><li class="dropdown-subitem"><a href="/basicSystem/mvvm/Electron/" class="nav-link">
  Electron
</a></li></ul></li><li class="dropdown-item"><h4>
          前端工程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basicSystem/webpack/" class="nav-link">
  webpack
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/basicSystem/deepLearning/" class="nav-link">
  专题
</a></div><div class="nav-item"><a href="/basicSystem/coding/" class="nav-link router-link-active">
  Coding
</a></div><div class="nav-item"><a href="/basicSystem/interview/" class="nav-link">
  考点
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          编辑器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basicSystem/soft/git.html" class="nav-link">
  GIT
</a></li><li class="dropdown-subitem"><a href="/basicSystem/soft/vscode/" class="nav-link">
  VSCODE
</a></li></ul></li><li class="dropdown-item"><h4>
          效率工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/basicSystem/coding/figma.com.html" class="nav-link">
  figma
</a></li></ul></li></ul></div></div> <a href="https://github.com/bbzz/basicSystem" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/basicSystem/coding/" class="sidebar-link">1000+ CODING 计划</a></li><li><a href="/basicSystem/coding/codingFn.html" class="active sidebar-link">高频函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#模拟-object-create" class="sidebar-link">模拟 Object.create</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#模拟-new" class="sidebar-link">模拟 new</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#实现-call" class="sidebar-link">实现 call</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#实现-apply" class="sidebar-link">实现 apply</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#实现-bind" class="sidebar-link">实现 bind</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#多种实现-继承" class="sidebar-link">多种实现 - 继承</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#多种实现-创建对象" class="sidebar-link">多种实现 - 创建对象</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#防抖函数-debounce" class="sidebar-link">防抖函数 debounce</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#节流函数-throttle" class="sidebar-link">节流函数 throttle</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#函数柯里化-curry" class="sidebar-link">函数柯里化 curry</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#偏函数-partial" class="sidebar-link">偏函数 partial</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#惰性函数" class="sidebar-link">惰性函数</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#函数组合-compose" class="sidebar-link">函数组合 compose</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#函数记忆-memoize" class="sidebar-link">函数记忆 memoize</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#递归-recursion" class="sidebar-link">递归 recursion</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#深拷贝-deepclone" class="sidebar-link">深拷贝 deepclone</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#乱序" class="sidebar-link">乱序</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#实现-event-event-bus" class="sidebar-link">实现 Event(event bus)</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#实现-instanceof" class="sidebar-link">实现 instanceOf</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#实现-json-parse" class="sidebar-link">实现 JSON.parse</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#实现-promise" class="sidebar-link">实现 Promise</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#解析-url-params-为对象" class="sidebar-link">解析 URL Params 为对象</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#模板引擎实现" class="sidebar-link">模板引擎实现</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#转化为驼峰命名" class="sidebar-link">转化为驼峰命名</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#查找字符串中出现最多的字符和个数" class="sidebar-link">查找字符串中出现最多的字符和个数</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#字符串查找" class="sidebar-link">字符串查找</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#实现千位分隔符" class="sidebar-link">实现千位分隔符</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#判断是否是电话号码" class="sidebar-link">判断是否是电话号码</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#验证是否是邮箱" class="sidebar-link">验证是否是邮箱</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#验证是否是身份证" class="sidebar-link">验证是否是身份证</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#手写原生-ajax-fetch" class="sidebar-link">手写原生 Ajax Fetch</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#手写-jsonp-的实现原理" class="sidebar-link">手写 jsonp 的实现原理</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#symbol-的用法以及常见应用" class="sidebar-link">Symbol 的用法以及常见应用</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#函数柯里化" class="sidebar-link">函数柯里化</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#js-数组花式操作" class="sidebar-link">JS 数组花式操作</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#数组去重" class="sidebar-link">数组去重</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#类型判断-上" class="sidebar-link">类型判断(上)</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#类型判断-下" class="sidebar-link">类型判断(下)</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#从零实现-jquery-的-extend" class="sidebar-link">从零实现 jQuery 的 extend</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#如何求数组的最大值和最小值" class="sidebar-link">如何求数组的最大值和最小值</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#数组扁平化" class="sidebar-link">数组扁平化</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#学-underscore-在数组中查找指定元素" class="sidebar-link">学 underscore 在数组中查找指定元素</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#jquery-通用遍历方法-each-的实现" class="sidebar-link">jQuery 通用遍历方法 each 的实现</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#如何判断两个对象相等" class="sidebar-link">如何判断两个对象相等</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#解读-v8-排序源码" class="sidebar-link">解读 v8 排序源码</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#系列-20-篇正式完结！" class="sidebar-link">系列 20 篇正式完结！</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#花式表示-26-个字母" class="sidebar-link">花式表示 26 个字母</a></li><li class="sidebar-sub-header"><a href="/basicSystem/coding/codingFn.html#" class="sidebar-link"></a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="高频函数"><a href="#高频函数" class="header-anchor">#</a> 高频函数</h1> <p><a href="https://juejin.im/post/5d51e16d6fb9a06ae17d6bbc" target="_blank" rel="noopener noreferrer">题目 1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="模拟-object-create"><a href="#模拟-object-create" class="header-anchor">#</a> 模拟 Object.create</h2> <blockquote><p>Object.create() 方法，创建一个新对象，使用现有对象提供新对象的原型。</p></blockquote> <details class="custom-block details"><summary>查看代码</summary> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">_Create</span><span class="token punctuation">(</span><span class="token parameter">Obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// function newFn(){};</span>
  <span class="token comment">// newFn.__proto__ = Foo;</span>
  <span class="token comment">// return newFn;</span>

  <span class="token keyword">const</span> newObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  newObj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> Obj<span class="token punctuation">;</span>
  <span class="token keyword">return</span> newObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">_Create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'bobo'</span><span class="token punctuation">,</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></details> <h2 id="模拟-new"><a href="#模拟-new" class="header-anchor">#</a> 模拟 new</h2> <blockquote><p>new 运算符，创建一个构造函数的实例。</p></blockquote> <p>new 关键字进行以下操作：</p> <ol><li>创建一个对象</li> <li>设置对象的构造函数为指定对象</li> <li>将创建的对象作为指定对象 this 的上下文</li> <li>如果没有返回对象，则返回 this</li></ol> <details class="custom-block details"><summary>查看代码</summary> <p>实现：</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">_new</span><span class="token punctuation">(</span><span class="token parameter">Fn<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1.</span>
  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 2.</span>
  <span class="token comment">// obj.constructor = Fn; // 这么写是不行的，相当于给obj添加了属性</span>
  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
  <span class="token comment">// 上面两步合并为一步</span>
  <span class="token comment">// obj.__proto__ = Object.create(Fn.prototype)</span>
  <span class="token comment">// 3.</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">Fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 4</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> result  <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> result <span class="token operator">:</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>验证：</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// 使用 返回的是一个对象</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// new 关键字</span>
<span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'zhoubo'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span>
<span class="token comment">// 模拟new函数</span>
<span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token function">_new</span><span class="token punctuation">(</span>Person<span class="token punctuation">,</span> <span class="token string">'zhoubo'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>

<span class="token comment">// 返回不是一个对象，就返回this</span>
<span class="token keyword">function</span> <span class="token function">Person2</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">'hello'</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token function">_new</span><span class="token punctuation">(</span>Person2<span class="token punctuation">,</span> <span class="token string">'zhoubo'</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span>
</code></pre></div></details> <h2 id="实现-call"><a href="#实现-call" class="header-anchor">#</a> 实现 call</h2> <blockquote><p>call 函数原型上的方法，Function.prototype.call(this, arg1, arg2...)。
指定一个 this，和若干参数来调用一个函数。简单讲，你想实现目的但是没有工具就借用了别人的工具达成结果。</p></blockquote> <details class="custom-block details"><summary>查看代码</summary> <p>举例：将一个字符串换个拼接形式，需要借用数组的 join 方法，我们就这么写</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'123456'</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span>
<span class="token comment">// &quot;1-2-3-4-5-6&quot;</span>
<span class="token comment">// 原型链调用 [].join.call('123456', '-') 效果等同</span>
</code></pre></div><p>实现：</p> <div class="language-JS extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_call</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 原理：将要借用的函数作为自己的一个方法，运行这个方法；</span>
  <span class="token comment">// _call作为函数原型的方法，所有函数都可以使用；context是最终函数运行的上下文，也就是借用者</span>
  <span class="token comment">// 1. context如果为null、undefined或着没传，context 指向window，因为这几个没法添加属性</span>
  <span class="token comment">// 并且context如果原始类型，是不能添加属性的，so...转换为对象</span>
  context <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">||</span> windows<span class="token punctuation">;</span>
  <span class="token comment">// 2. 这里的this是调用_call方法的函数对象，作为借用者的一个属性</span>
  <span class="token comment">// context.fn = this;</span>
  <span class="token comment">// 这里可以进一步优化，fn是有可能和this的属性重复的，使用Symbol</span>
  <span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">[</span>fn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token comment">// 3. 传入参数，调用它，展开符接受了剩余参数</span>
  <span class="token keyword">const</span> foo <span class="token operator">=</span> context<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
  <span class="token comment">// 4. 调用完毕，删除fn属性</span>
  <span class="token keyword">delete</span> foo<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// 5. 把结果返回</span>
  <span class="token keyword">return</span> foo
<span class="token punctuation">}</span>
</code></pre></div><p>验证：</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span>join<span class="token punctuation">.</span><span class="token function">_call</span><span class="token punctuation">(</span><span class="token string">'123456'</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span>
</code></pre></div><p>不足的是： 这里我们使用了 ES6 语法的展开符降维操作了，不过手写的意义是理解 call 的原理。</p> <p>补充：<code>...</code> 展开符的用法有二：</p> <ol><li>收，接受函数参数</li> <li>放，将类函数转为数组</li></ol> <div class="language-JS extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// ['1','2','3']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 数组去重 [1, 2, 3, 4]</span>
</code></pre></div></details> <h2 id="实现-apply"><a href="#实现-apply" class="header-anchor">#</a> 实现 apply</h2> <blockquote><p>apply 的运行和 apply 函数一致，唯一不同在于以数组的形式传递 函数所需 的参数</p></blockquote> <details class="custom-block details"><summary>查看代码</summary> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_apply</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  context <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">||</span> windows<span class="token punctuation">;</span>
  <span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">[</span>fn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token comment">// 与call唯一不同，数组形式传参</span>
  <span class="token keyword">const</span> foo <span class="token operator">=</span> context<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
  <span class="token keyword">delete</span> foo<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> foo
<span class="token punctuation">}</span>
</code></pre></div><p>验证：</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span>join<span class="token punctuation">.</span><span class="token function">_apply</span><span class="token punctuation">(</span><span class="token string">'123456'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'-'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div></details> <h2 id="实现-bind"><a href="#实现-bind" class="header-anchor">#</a> 实现 bind</h2> <blockquote><p>bind() 方法，创建一个新的函数，新函数的 this 被指定为 bind()的第一个参数，其余参数作为新函数的参数供调用时调用。</p></blockquote> <p>分析：</p> <ol><li>bind 与 call、apply 不同，接受参数的同时返回的是一个新函数</li> <li>新函数可以继续接受参数</li> <li>新函数可以作为构造函数</li></ol> <details class="custom-block details"><summary>查看代码</summary> <p>原版 bind() 函数</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'我会做加法：'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'我不会加法，我也变成一个会做加法的人：'</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> newAdd <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">newAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//我不会加法，我也变成一个会做加法的人：3</span>

<span class="token keyword">const</span> newAdd2 <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">newAdd2</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">//我不会加法，我也变成一个会做加法的人：7</span>
</code></pre></div><p>简单版 1.0</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_call</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>不足在于，无法进一步传参，return 一个函数接受参数，继续改造 2.0</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_bind</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 固定this，作为新函数的调用this指向新的对象</span>
    <span class="token keyword">return</span> <span class="token function">self</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>bind 返回的新函数还可以作为构造函数 使用 new 关键字，实例可以继承绑定函数原型中的属性。继续改造 3.0</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_bind</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">result</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果作为实例，this指向自身；如果作为普通函数，this还是指向context</span>
    <span class="token keyword">return</span> <span class="token function">self</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">result</span> <span class="token operator">?</span> <span class="token keyword">this</span> <span class="token operator">:</span> context<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 实例的__proto__指向this.prototype</span>
  result<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
  <span class="token comment">// 这样是不行的，如果直接修改result.prototype属性也会影响绑定函数原型对象</span>
  <span class="token comment">// 新建一个空函数来承接</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>整理下，最终版</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_bind</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">Fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  Fn<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">result</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">self</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">result</span> <span class="token operator">?</span> <span class="token keyword">this</span> <span class="token operator">:</span> context<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  result<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <h2 id="多种实现-继承"><a href="#多种实现-继承" class="header-anchor">#</a> 多种实现 - 继承</h2> <p>多种继承方式的优缺点</p> <details class="custom-block details"><summary>1. 原型链继承</summary> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'kevin'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

child1<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// 'kevin'</span>
</code></pre></div><p>存在问题有二：</p> <ol><li>多个引用类型属性 被所有实例共享（实例读取的 Child 的 name 属性）</li> <li>创建 Child 的实例时，无法向 Person 传参</li></ol> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'kevin'</span><span class="token punctuation">,</span> <span class="token string">'lily'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> child2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

child1<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'bobo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child2<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// [&quot;kevin&quot;, &quot;lily&quot;, &quot;bobo&quot;]</span>
</code></pre></div></details> <details class="custom-block details"><summary>2. 经典继承 • 借用构造函数</summary> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'kevin'</span><span class="token punctuation">,</span> <span class="token string">'lily'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// call 来借用构造函数Person，并实现传参</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>验证：</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> child2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child1<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'bobo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

child1<span class="token punctuation">.</span>age<span class="token punctuation">;</span> <span class="token comment">// 28</span>
child2<span class="token punctuation">.</span>age<span class="token punctuation">;</span> <span class="token comment">// 19</span>
child1<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">//[&quot;kevin&quot;, &quot;lily&quot;, &quot;bobo&quot;]</span>
child2<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">//[&quot;kevin&quot;, &quot;lily&quot;]</span>
</code></pre></div><p>避免了原型链继承方案，实例之间属性影响和不可传参的缺点；
此方案的缺点在于：</p> <ol><li>每次创建实例都要创建一次方法;</li> <li>Person.prototype 上的属性无法继承</li></ol></details> <details class="custom-block details"><summary>3. 组合继承 • 原型链继承+经典继承</summary> <p>综合了二者的优点</p> <div class="language-JS extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token comment">// 经典继承 • 借用构造函数</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'kevin'</span><span class="token punctuation">,</span> <span class="token string">'lily'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 原型链</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// constructor 指会本身</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Child<span class="token punctuation">;</span>
</code></pre></div><p>缺点在于：调用两次父级构造函数：
<code>new</code>模拟实现时，内部借用 call 方法， Person.call(this, ...args)</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// 1次</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2次</span>
<span class="token keyword">const</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></details> <details class="custom-block details"><summary>4. 原型式继承</summary> <p>Object.create()，和原型链继承存在同样的问题</p> <p>Object.create 的模拟实现：</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createObj</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> o<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <details class="custom-block details"><summary>5.寄生式继承</summary> <p>封装一个创建继承过程的函数，该函数在内部以某种形式来做强对象</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">creatObj</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> clone <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
  clone<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> clone
<span class="token punctuation">}</span>
</code></pre></div><p>不足之处，在于每次创建对象都会调用一次方法</p></details> <details class="custom-block details"><summary>6.最终版：寄生组合式继承</summary> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">prototype</span><span class="token punctuation">(</span><span class="token parameter">child<span class="token punctuation">,</span> parent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  child<span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
  <span class="token comment">// child.prototype.constructor = child;</span>
  <span class="token comment">// constructor属性不可遍历</span>
  Object<span class="token punctuation">.</span><span class="token function">definePrototype</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">'constructor'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> child<span class="token punctuation">;</span>
    enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用</span>
<span class="token function">prototype</span><span class="token punctuation">(</span>Child<span class="token punctuation">,</span> Parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></details> <h2 id="多种实现-创建对象"><a href="#多种实现-创建对象" class="header-anchor">#</a> 多种实现 - 创建对象</h2> <details class="custom-block details"><summary>1.工厂模式</summary> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  o<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  o<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> o<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person1 <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">&quot;bobo&quot;</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><p>特点：批量 <code>return</code> 具有某些相同特征的属性的对象。</p></li> <li><p>缺点：所有对象的原型指向同一个，无法识别分辨</p></li></ul></details> <details class="custom-block details"><summary>2. 构造函数模式</summary> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'bobo'</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>优点：可识别实例来源</li> <li>缺点：每次创建实例，每个方法都会被创建一次</li></ul> <p>优化版构造函数的方法：</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>getName <span class="token operator">=</span> getName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'bobo'</span><span class="token punctuation">)</span>

<span class="token operator">-</span> 优点：优化了每次方法都要被创建的问题
<span class="token operator">-</span> 缺点：已经不能叫做封装了。。。。
</code></pre></div></details> <details class="custom-block details"><summary>3. 原型模式</summary> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'kevin'</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'bobo'</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>缺点：所有属性和方法都共享，无法传参</li></ul> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  name <span class="token operator">:</span> <span class="token string">'kevin'</span><span class="token punctuation">;</span>
  <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>缺点： 重写了 Person.prototype，丢失了 <code>constructor</code></li></ul> <p>继续优化：</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  constructor<span class="token operator">:</span> Person<span class="token punctuation">,</span>
  name <span class="token operator">:</span> <span class="token string">'kevin'</span><span class="token punctuation">;</span>
  <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> 优点：实例可以通过constructor属性找到所属的构造函数
<span class="token operator">-</span> 缺点：原型模式的所有缺点
</code></pre></div></details> <details class="custom-block details"><summary>4. 组合模式 • 最广泛的使用模式</summary> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  constructor<span class="token operator">:</span> Person<span class="token punctuation">,</span>
  <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

优点：私有和共享分开。
</code></pre></div></details> <h2 id="防抖函数-debounce"><a href="#防抖函数-debounce" class="header-anchor">#</a> 防抖函数 debounce</h2> <blockquote><p>事件在被触发 n 秒后在执行回调，如果在这 n 秒内被再次触发，则重新计时。</p></blockquote> <details class="custom-block details"><summary>查看代码</summary> <div class="language-JS extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">debounce</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay<span class="token operator">=</span><span class="token number">100</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> timeoutId<span class="token punctuation">;</span>
  <span class="token comment">// 闭包 共用timeoutId</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// return 必须为普通函数，this为调用的dom元素。</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeoutId<span class="token punctuation">)</span>
    timeoutId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 这里剪头函数的this非常巧妙，继承return的上下文</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <h2 id="节流函数-throttle"><a href="#节流函数-throttle" class="header-anchor">#</a> 节流函数 throttle</h2> <blockquote><p>在规定的时间内，只能触发执行一次。</p></blockquote> <details class="custom-block details"><summary>查看代码</summary> <p>时间戳版：</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> inThrottle<span class="token punctuation">,</span> lastTime<span class="token punctuation">,</span> timeoutId<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>inThrottle<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      lastTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      inThrottle <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeoutId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>lastTime <span class="token operator">&gt;=</span> delay<span class="token punctuation">)</span><span class="token punctuation">{</span>
        timeoutId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
          lastTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token operator">-</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>lastTime<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>定时器版：</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> inThrottle <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>inThrottle<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    inThrottle <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      inThrottle <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <h2 id="函数柯里化-curry"><a href="#函数柯里化-curry" class="header-anchor">#</a> 函数柯里化 curry</h2> <blockquote><p>只传递一部分参数来调用他，让他返回一个函数去处理剩余的参数</p></blockquote> <details class="custom-block details"><summary>查看代码</summary> <p>你可以一次性地调用 curry 函数，也可以每次传递一个参数分多次调用</p> <p>应用</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> a<span class="token operator">+</span>b
<span class="token punctuation">}</span>

<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>

<span class="token comment">// 假如有一个 curry 函数可以柯里化</span>
<span class="token keyword">const</span> addCurry <span class="token operator">=</span> <span class="token function">curry</span><span class="token punctuation">(</span>add<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token function">addCurry</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">//2</span>
</code></pre></div><p>现在，我们来实现一个这样的 curry 函数</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// 连续调用，递归</span>
<span class="token keyword">const</span> <span class="token function-variable function">curry</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 传参个数是否满足 fn 形参个数作为跳出条件</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> fn<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 继续接受参数</span>
    <span class="token comment">// bind 函数，将历次传递的参数存储起来</span>
    <span class="token keyword">return</span> <span class="token function">curry</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>整理代码：</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">curry</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
fn<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> args<span class="token punctuation">.</span>length <span class="token operator">?</span>
<span class="token function">curry</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> fn <span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>

<span class="token comment">// 验证</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> a<span class="token operator">+</span> b<span class="token operator">+</span> c
<span class="token punctuation">}</span>

<span class="token function">curry</span><span class="token punctuation">(</span>add<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token comment">// 14</span>
</code></pre></div><p>有时，函数形参个数没有边界，可以用空参跳出</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 闭包 接受依次传入的参数</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> args<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
      arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">]</span>
      <span class="token keyword">return</span> foo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 验证</span>
<span class="token comment">// 一个多项目求和函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>args<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>acc<span class="token operator">+</span>cur<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token function">curry</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token comment">// 17</span>
</code></pre></div><p>举一返三：</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// 闭包替代例1中的bind接受参数</span>
<span class="token keyword">function</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 闭包 接受依次传入的参数</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> args<span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">judge</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    arr <span class="token operator">=</span> arr <span class="token operator">+</span> res<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> fn<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> judge<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> judge<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 简化</span>
<span class="token keyword">const</span> <span class="token function-variable function">curry</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> args<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function-variable function">judge</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">]</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> fn<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span> <span class="token operator">:</span> judge<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <p>有闭包引发的一道网红题， 实现一个如下函数：</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 6</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// 10</span>
</code></pre></div><details class="custom-block details"><summary>查看代码</summary> <p>和上面的柯里化的求和，不一样的地方在于，无法设置跳出条件</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// 同样的求和函数</span>
  <span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>args<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>acc<span class="token operator">+</span>cur<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment">// 自身既可以接受参数又能输出结果，怎么办？</span>
<span class="token comment">// 小技巧，toString() 输出函数时默认返回函数体字符串，重置它</span>
<span class="token keyword">function</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 闭包 接受依次传入的参数</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> args<span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">]</span>
    <span class="token keyword">return</span> foo<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// foo.toString = ()=&gt; fn(...arr)</span>
  <span class="token comment">// return foo 就会执行toString，+foo做计算时会优先调用 valueOf</span>
  <span class="token keyword">return</span> foo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 验证</span>

</code></pre></div><p>然而，以上并不是真正定义的柯里化</p> <p>如果搞清楚，需要和偏函数放在一起看</p></details> <h2 id="偏函数-partial"><a href="#偏函数-partial" class="header-anchor">#</a> 偏函数 partial</h2> <p>实际上偏函数和柯里化非常相似：</p> <ul><li>柯里化：把 N 个参数的函数变成 n 个只有一个参数的函数；</li> <li>偏函数：固定一个函数的一个或多个参数的函数，也叫做局部应用；</li></ul> <p>没有必要可以区分二者，搞明白原理或者这个技巧就好。</p> <h2 id="惰性函数"><a href="#惰性函数" class="header-anchor">#</a> 惰性函数</h2> <blockquote><p>每次调用函数都需要条件判断，其实只需要判断一次，接下来使用方式都不会发生改变。这时该惰性函数上场了，只判断一次后面使用不需要再判断</p></blockquote> <details class="custom-block details"><summary>查看代码</summary> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// 一个foo函数，这个函数返回首次调用的data对象</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> t<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>实际上，惰性函数就是重写了函数</p></details> <h2 id="函数组合-compose"><a href="#函数组合-compose" class="header-anchor">#</a> 函数组合 compose</h2> <blockquote><p>将多个函数组合成一个函数，让代码从右向左执行，而不是从内向外执行，大大提高代码的可读性。</p></blockquote> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// fn3(fn2(fn1(fn0(xxx))))</span>

<span class="token keyword">const</span> <span class="token function-variable function">compose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>fns</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> fns<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> g</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function-variable function">fn3</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> <span class="token string">'3'</span>
<span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> <span class="token string">'2'</span>
<span class="token function-variable function">fn1</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> <span class="token string">'1'</span>
<span class="token function-variable function">fn0</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> <span class="token string">'0'</span>

<span class="token function">compose2</span><span class="token punctuation">(</span>fn3<span class="token punctuation">,</span> fn2<span class="token punctuation">,</span> fn1<span class="token punctuation">,</span> fn0<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="函数记忆-memoize"><a href="#函数记忆-memoize" class="header-anchor">#</a> 函数记忆 memoize</h2> <blockquote><p>将上一次的计算结果缓存起来，下次调用时，如果遇到一样的参数直接从缓存中读取。</p></blockquote> <details class="custom-block details"><summary>查看代码</summary> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">memoize</span> <span class="token operator">=</span> <span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">cached</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 接受参数为对象时</span>
    <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
    <span class="token keyword">return</span> cache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">?</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">:</span> cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  cached<span class="token punctuation">.</span>cache <span class="token operator">=</span> cache<span class="token punctuation">;</span>
  <span class="token keyword">return</span> cached<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">memoize</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">a</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div></details> <h2 id="递归-recursion"><a href="#递归-recursion" class="header-anchor">#</a> 递归 recursion</h2> <p>两个例子</p> <ul><li><code>1 + 2 + 3 + ... + 100</code></li> <li><code>1 * 2 * ... * 100</code></li></ul> <details class="custom-block details"><summary>查看代码</summary> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> n<span class="token punctuation">;</span>
  <span class="token keyword">return</span> n <span class="token operator">+</span> <span class="token function">add</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> n<span class="token punctuation">;</span>
  <span class="token keyword">return</span> n <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当执行一个函数的时候会创建一个执行上下文，以上两个递归函数会不停的创建执行上下文压入执行上下文栈，对内存而言是不小的开销。</p> <p>尾调用来优化：</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// 用参数来接受值，每次函数执行完毕，执行上下文都会弹出</span>
<span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token operator">*</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">factorialed</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">factorialed</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre></div></details> <p>递归的特点是：</p> <ol><li>处理的是相同的问题</li> <li>不能无限调用本身，必须有一个出口</li></ol> <h2 id="深拷贝-deepclone"><a href="#深拷贝-deepclone" class="header-anchor">#</a> 深拷贝 deepclone</h2> <details class="custom-block details"><summary>数组 浅 拷贝</summary> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span class="token comment">// 1. concat</span>
<span class="token keyword">const</span> newArr1  <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 2.  slice</span>
<span class="token keyword">const</span> newArr2  <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 3. 扩展符</span>
<span class="token keyword">const</span> newArr3  <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arr<span class="token punctuation">]</span>

<span class="token comment">// 4. from</span>
<span class="token keyword">const</span> newArr3  <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
</code></pre></div><p>特点：引用类型元素的数组，只拷贝了对象和数组的引用。称之为<code>浅拷贝</code></p></details> <details class="custom-block details"><summary>深拷贝 - JSON</summary> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> newArr  <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>局限性：</p> <ol><li>无法对函数、RegExp 等特殊对象的克隆</li> <li>会抛弃对象的 constructor，所有构造函数指向 Object</li> <li>对象有循环引用，会报错</li></ol></details> <details class="custom-block details"><summary>深拷贝 - 递归</summary> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> newObj <span class="token operator">=</span> obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> newObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>深拷贝的不足和，JSON 版本一样，一次性递归到底带来性能差的问题。</p></details> <h2 id="乱序"><a href="#乱序" class="header-anchor">#</a> 乱序</h2> <h2 id="实现-event-event-bus"><a href="#实现-event-event-bus" class="header-anchor">#</a> 实现 Event(event bus)</h2> <h2 id="实现-instanceof"><a href="#实现-instanceof" class="header-anchor">#</a> 实现 instanceOf</h2> <h2 id="实现-json-parse"><a href="#实现-json-parse" class="header-anchor">#</a> 实现 JSON.parse</h2> <h2 id="实现-promise"><a href="#实现-promise" class="header-anchor">#</a> 实现 Promise</h2> <h2 id="解析-url-params-为对象"><a href="#解析-url-params-为对象" class="header-anchor">#</a> 解析 URL Params 为对象</h2> <h2 id="模板引擎实现"><a href="#模板引擎实现" class="header-anchor">#</a> 模板引擎实现</h2> <h2 id="转化为驼峰命名"><a href="#转化为驼峰命名" class="header-anchor">#</a> 转化为驼峰命名</h2> <h2 id="查找字符串中出现最多的字符和个数"><a href="#查找字符串中出现最多的字符和个数" class="header-anchor">#</a> 查找字符串中出现最多的字符和个数</h2> <h2 id="字符串查找"><a href="#字符串查找" class="header-anchor">#</a> 字符串查找</h2> <h2 id="实现千位分隔符"><a href="#实现千位分隔符" class="header-anchor">#</a> 实现千位分隔符</h2> <h2 id="判断是否是电话号码"><a href="#判断是否是电话号码" class="header-anchor">#</a> 判断是否是电话号码</h2> <h2 id="验证是否是邮箱"><a href="#验证是否是邮箱" class="header-anchor">#</a> 验证是否是邮箱</h2> <h2 id="验证是否是身份证"><a href="#验证是否是身份证" class="header-anchor">#</a> 验证是否是身份证</h2> <p><a href="https://juejin.im/post/5e77888ff265da57187c7278" target="_blank" rel="noopener noreferrer">题目 2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="手写原生-ajax-fetch"><a href="#手写原生-ajax-fetch" class="header-anchor">#</a> 手写原生 Ajax Fetch</h2> <h2 id="手写-jsonp-的实现原理"><a href="#手写-jsonp-的实现原理" class="header-anchor">#</a> 手写 jsonp 的实现原理</h2> <h2 id="symbol-的用法以及常见应用"><a href="#symbol-的用法以及常见应用" class="header-anchor">#</a> Symbol 的用法以及常见应用</h2> <h2 id="函数柯里化"><a href="#函数柯里化" class="header-anchor">#</a> 函数柯里化</h2> <h2 id="js-数组花式操作"><a href="#js-数组花式操作" class="header-anchor">#</a> JS 数组花式操作</h2> <h2 id="数组去重"><a href="#数组去重" class="header-anchor">#</a> 数组去重</h2> <h2 id="类型判断-上"><a href="#类型判断-上" class="header-anchor">#</a> 类型判断(上)</h2> <h2 id="类型判断-下"><a href="#类型判断-下" class="header-anchor">#</a> 类型判断(下)</h2> <h2 id="从零实现-jquery-的-extend"><a href="#从零实现-jquery-的-extend" class="header-anchor">#</a> 从零实现 jQuery 的 extend</h2> <h2 id="如何求数组的最大值和最小值"><a href="#如何求数组的最大值和最小值" class="header-anchor">#</a> 如何求数组的最大值和最小值</h2> <h2 id="数组扁平化"><a href="#数组扁平化" class="header-anchor">#</a> 数组扁平化</h2> <h2 id="学-underscore-在数组中查找指定元素"><a href="#学-underscore-在数组中查找指定元素" class="header-anchor">#</a> 学 underscore 在数组中查找指定元素</h2> <h2 id="jquery-通用遍历方法-each-的实现"><a href="#jquery-通用遍历方法-each-的实现" class="header-anchor">#</a> jQuery 通用遍历方法 each 的实现</h2> <h2 id="如何判断两个对象相等"><a href="#如何判断两个对象相等" class="header-anchor">#</a> 如何判断两个对象相等</h2> <h2 id="解读-v8-排序源码"><a href="#解读-v8-排序源码" class="header-anchor">#</a> 解读 v8 排序源码</h2> <h2 id="系列-20-篇正式完结！"><a href="#系列-20-篇正式完结！" class="header-anchor">#</a> 系列 20 篇正式完结！</h2> <h2 id="花式表示-26-个字母"><a href="#花式表示-26-个字母" class="header-anchor">#</a> 花式表示 26 个字母</h2> <h2 id=""><a href="#" class="header-anchor">#</a></h2></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/bbzz/basicSystem/edit/master/docs/coding/codingFn.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/5/2020, 9:43:58 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/basicSystem/coding/" class="prev router-link-active">
        1000+ CODING 计划
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/basicSystem/assets/js/app.fe57eed6.js" defer></script><script src="/basicSystem/assets/js/3.40885dd2.js" defer></script><script src="/basicSystem/assets/js/8.da290d25.js" defer></script>
  </body>
</html>
